(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{386:function(t,s,a){"use strict";a.r(s);var n=a(48),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[t._v("#")]),t._v(" node")]),t._v(" "),a("h2",{attrs:{id:"_1-es6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-es6"}},[t._v("#")]),t._v(" 1.ES6")]),t._v(" "),a("p",[t._v("ECMA -> ECMAScript ->  ES")]),t._v(" "),a("p",[t._v("​               标准规范")]),t._v(" "),a("p",[t._v("ES6 js的第六套标准规范")]),t._v(" "),a("p",[t._v("例如  getDays（2021，5，18）")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDay")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("year"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("month"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("day")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//如果是闰年是29天，否则28天")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" second "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" year"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" year"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" year"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//声明变量，用于记录天数，先把当前月天数加入进去")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" day"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//每个月的天数不同")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("second"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//遍历当前月份")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" month"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回总的天数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDay")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("year"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("month"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//计算当前日期距离一年的一月一日相差的毫秒数")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" d1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("year"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("month"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("date"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" d2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("year"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" d "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" d1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" d2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//相差的值换算为天")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" d"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_1-块级作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-块级作用域"}},[t._v("#")]),t._v(" （1）块级作用域")]),t._v(" "),a("p",[t._v("为了解决全局污染的问题")]),t._v(" "),a("p",[t._v("let a = 1；")]),t._v(" "),a("p",[t._v("let声明的变量"),a("strong",[t._v("不存在提升")]),t._v("，在"),a("strong",[t._v("同一个作用域")]),t._v("下，"),a("strong",[t._v("不允许重复声明")]),t._v("同一个变量")]),t._v(" "),a("p",[t._v("大括号{}之间的语句块就是一个块级作用域，例如：if、else、while、do while、for....在块级作用域下，let和const声明的都是局部的，无法被访问到。")]),t._v(" "),a("div",{staticClass:"language-test extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("var let const三个区别\nvar 声明的变量存在提升，在同一个作用域下可以重复声明同一个变量\nlet 声明的变量不存在提升，在同一个作用域下不允许重复声明同一个变量，存在块级作用域，即使在全局作用域下let声明的变量也不是全局的\nconst 声明的时候必须赋值，不允许重新赋值，存在块级作用域，即使在全局作用域下const声明的常量也不是全局的\n")])])]),a("p",[t._v("练习：计算1~100之间所有整数的和，要求使用let声明变量")]),t._v(" "),a("h4",{attrs:{id:"_2-参数增强"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-参数增强"}},[t._v("#")]),t._v(" （2）参数增强")]),t._v(" "),a("p",[t._v("可以给数的参数设置默认值")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//c = c||0;  //es6之前的默认值设置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//没有出现的实参就会使用默认值")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3-箭头函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-箭头函数"}},[t._v("#")]),t._v(" （3）箭头函数")]),t._v(" "),a("p",[t._v("()=>{ }")]),t._v(" "),a("p",[t._v("作用：简化了匿名函数的写法，不等价于匿名函数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//从小到大的排序")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//如果箭头函数里的函数体中只有一行函数，并且为return形式")]),t._v("\narr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//从小到大的排序")]),t._v("\n")])])]),a("p",[t._v("练习：使用函数表达式创建函数（用匿名函数）将之前的匿名函数使用箭头函数代替，计算任意三个数字的平均值并返回结果。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("c")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("b"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("（4）模板字符串")]),t._v(" "),a("p",[t._v("解决了字符串的拼接问题")]),t._v(" "),a("p",[t._v("、模板字符串 ${JS表达式}")]),t._v(" "),a("p",[t._v("练习：声明变量保存一条员工的数据，格式为对象，包含的属性有编号，姓名，性别（1/0），工资；最后打印出以下格式")]),t._v(" "),a("p",[t._v("编号：X")]),t._v(" "),a("p",[t._v("姓名：XX")]),t._v(" "),a("p",[t._v("性别：男／女")]),t._v(" "),a("p",[t._v("工资：XXXX.00元")]),t._v(" "),a("h3",{attrs:{id:"_1-node-js是运行在服务器端的js解释器-基于谷歌的v8引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-node-js是运行在服务器端的js解释器-基于谷歌的v8引擎"}},[t._v("#")]),t._v(" 1.Node.js是运行在服务器端的js解释器，基于谷歌的v8引擎")]),t._v(" "),a("h4",{attrs:{id:"_1-对比js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-对比js"}},[t._v("#")]),t._v(" （1）对比JS")]),t._v(" "),a("p",[t._v("JS运行在客户端浏览器，存在多种JS解释器，存在代码兼容性问题；")]),t._v(" "),a("p",[t._v("Node.js只有V8引擎一种解释器，不存在代码兼容性问题")]),t._v(" "),a("p",[t._v("JS和Node.js都有共同的ES（内置）对象和自定义对象，不同的宿主对象")]),t._v(" "),a("p",[t._v("JS用于开发浏览器端的交互效果，Node.js用于服务器端开发，例如数据库的访问，其他服务器的调用.....")]),t._v(" "),a("h4",{attrs:{id:"_2-网址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-网址"}},[t._v("#")]),t._v(" （2）网址")]),t._v(" "),a("p",[t._v("www.nodejs.org  官网")]),t._v(" "),a("p",[t._v("www.nodejs.cn    中文镜像")]),t._v(" "),a("h4",{attrs:{id:"_3-使用node-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用node-js"}},[t._v("#")]),t._v(" （3）使用node.js")]),t._v(" "),a("p",[t._v("脚本模式")]),t._v(" "),a("p",[t._v("node  拖拽脚本文件   回车")]),t._v(" "),a("p",[t._v("node 文件名前几个数字+tab键")]),t._v(" "),a("p",[t._v("交互模式")]),t._v(" "),a("p",[t._v("进入：node  回车  进入交互模式")]),t._v(" "),a("p",[t._v("退出：两次CTRL+C      或者    一次CTRL+D")]),t._v(" "),a("h4",{attrs:{id:"_4-特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-特点"}},[t._v("#")]),t._v(" （4）特点")]),t._v(" "),a("p",[t._v("Node.js属于"),a("strong",[t._v("单线程运行逻辑")]),t._v("，支持数万个并发连接，适合做"),a("strong",[t._v("基于社交网络的大规模web应用")]),t._v("，不适合做CPU密集型的操作。")]),t._v(" "),a("h3",{attrs:{id:"_2-全局对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-全局对象"}},[t._v("#")]),t._v(" 2.全局对象")]),t._v(" "),a("p",[t._v("也叫全局模块")]),t._v(" "),a("p",[t._v("（1）global")]),t._v(" "),a("p",[t._v("检测一个变量或者函数是否为全局的")]),t._v(" "),a("p",[t._v("交互模式属于全局作用域，创建的函数和声明的变量是全局的")]),t._v(" "),a("p",[t._v("每个脚本文件都是在一个作用域下，里边的函数和变量都是局部的，不存在全局污染")]),t._v(" "),a("p",[t._v("JS下的global叫做window")]),t._v(" "),a("p",[t._v("练习：编写脚本文件03_global.js,在脚本文件下声明变量、创建函数，然后通过global检测是否为全局")]),t._v(" "),a("p",[t._v("练习：创建文件04_window.js和04.html，把js嵌入html，声明变量、创建函数，然后通过window检测是否为全局")]),t._v(" "),a("p",[t._v("（2）console")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//日志")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//消息")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//警告")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//错误")]),t._v("\n开始计时和结束计时的参数要保持一致\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//开始计时")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeEnd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//结束计时")]),t._v("\n")])])]),a("p",[t._v("练习：分别查看for、while、do—while三种循环分别循环100000次的耗时")]),t._v(" "),a("p",[t._v("（3）process")]),t._v(" "),a("p",[t._v("进程：计算机上的软件运行都是代表相应的进程")]),t._v(" "),a("p",[t._v("API")]),t._v(" "),a("p",[t._v("process.arch   :查看当前CPU的架构")]),t._v(" "),a("p",[t._v("process.platform :查看当前的操作系统")]),t._v(" "),a("p",[t._v("process.version :查看当前Node.js的版本号")]),t._v(" "),a("p",[t._v("process.pid：查看当前node的进程编号")]),t._v(" "),a("p",[t._v("process.kill（进程编号）：结束指定编号的进程")]),t._v(" "),a("p",[t._v("（4）buffer")]),t._v(" "),a("p",[t._v("缓冲器：在内存中临时存储数据的区域，常用于保存网络传输时的资源")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" buf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alloc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'好的'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置大小为6个字节  一个汉字占三个字节")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//底层是二进制编码，显示的是16进制的编码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将buffer转为字符串")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将Buffer数据转为字符串")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-定时器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-定时器"}},[t._v("#")]),t._v(" 3.定时器")]),t._v(" "),a("p",[t._v("一次性定时器：")]),t._v(" "),a("p",[t._v("开启：")]),t._v(" "),a("p",[t._v("var timer = setTimeout(回调函数，间隔时间)")]),t._v(" "),a("p",[t._v("当间隔时间到了，调用一次回调函数")]),t._v(" "),a("p",[t._v("清除：")]),t._v(" "),a("p",[t._v("cleanTimeOut（timer）")]),t._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210519194441220.png",alt:"image-20210519194441220"}})]),t._v(" "),a("p",[t._v("主程序（执行）")]),t._v(" "),a("p",[t._v("定时器（回调函数，时间（ms））")]),t._v(" "),a("p",[t._v("回调函数在事件队列里执行")]),t._v(" "),a("p",[t._v("定时器的执行：")]),t._v(" "),a("p",[t._v("主程序执行时回调函数放入事件队列（由一组回调函数组成）等待时间过后执行回调函数")]),t._v(" "),a("p",[t._v("课后任务")]),t._v(" "),a("p",[t._v("(1)复习今天内容，整理思维导图")]),t._v(" "),a("p",[t._v("(2)练习")]),t._v(" "),a("p",[t._v("创建主模块(main.js)和功能模块(circle.js)，在功能模块下导出两个函数，传递参数半径，分别返回周长和面积；在主模块下引入成功后，调用这两个函数")]),t._v(" "),a("p",[t._v("(3)预习nodejs第2天内容，异步")]),t._v(" "),a("h2",{attrs:{id:"day11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#day11"}},[t._v("#")]),t._v(" day11")]),t._v(" "),a("h3",{attrs:{id:"_1-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-模块"}},[t._v("#")]),t._v(" 1.模块")]),t._v(" "),a("p",[t._v("是一个独立的功能体，模块可以被其他的模块引入，也可以引入其他的模块")]),t._v(" "),a("p",[t._v("require（） 用于引入其他的模块,得到导出的对象")]),t._v(" "),a("p",[t._v("module.exports  当前模块导出的对象，是一个空对象，用于存放导出的内容")]),t._v(" "),a("p",[t._v("__dirname  当前模块的绝对目录")]),t._v(" "),a("p",[t._v("__filename  当前模块的绝对目录+模块名称")]),t._v(" "),a("h3",{attrs:{id:"_2-模块分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-模块分类"}},[t._v("#")]),t._v(" 2.模块分类")]),t._v(" "),a("p",[t._v("分为自定义模块、第三方模块、核心模块")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("以路径开头")]),t._v(" "),a("th",[t._v("不以路径开头")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("文件形式")]),t._v(" "),a("td",[a("strong",[t._v("require（./circle.js‘）")]),t._v("                     用于引入自定义模块")]),t._v(" "),a("td",[t._v("**require('querystring')**引入官方提供的核心模块")])]),t._v(" "),a("tr",[a("td",[t._v("目录形式")]),t._v(" "),a("td",[t._v("**require(./02_tao)**首先会在目录下寻找package.json文件中main属性对应的文件，如果找不到会自动找index.js")]),t._v(" "),a("td",[t._v("**require('tao')**会到同一级的node_modules目录中寻找tao目录，如果找不到会一直往上一级的node_modules        （用于引入第三方模块）")])])])]),t._v(" "),a("p",[t._v("json文件中属性名和属性值要用双引号，且不能添加注释")]),t._v(" "),a("p",[t._v("练习：在03_1.js中引入同一级的目录模块03_2,目录下含有文件index.js,导出一个函数，传递任意两个数字返回最大值，最后在03_1.js中调用该函数")]),t._v(" "),a("h3",{attrs:{id:"_3-包和npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-包和npm"}},[t._v("#")]),t._v(" 3.包和npm")]),t._v(" "),a("p",[t._v("包（package）：指的是第三方模块")]),t._v(" "),a("p",[t._v("CommonJS规范：Node.js就是遵循这个规范，出现的模块概念。JS之所以作为服务器端语言，就是遵循这个规范。")]),t._v(" "),a("p",[t._v("下载地址：www.npmjs.com")]),t._v(" "),a("p",[t._v("（1）切换命令行的目录")]),t._v(" "),a("p",[t._v("1."),a("strong",[t._v("cd  粘贴目录的路径")]),t._v("     回车")]),t._v(" "),a("p",[t._v("如果有盘符的变化，需要添加  "),a("strong",[t._v("盘符名称")]),t._v("：回车")]),t._v(" "),a("p",[t._v("2.window10：")]),t._v(" "),a("p",[t._v("在要进入的目录下的空白区域，按住shift+单击右键，选择 ‘在此处打开powershell窗口’")]),t._v(" "),a("p",[t._v("（2）使用npm")]),t._v(" "),a("p",[t._v("在Node.js安装的时候会附带安装")]),t._v(" "),a("p",[a("strong",[t._v("npm -v")]),t._v("  查看版本号")]),t._v(" "),a("p",[a("strong",[t._v("npm init -y")]),t._v("  初始化一个package.json文件，是项目描述文件，可以记录下安装的包")]),t._v(" "),a("p",[a("strong",[t._v("npm install 包的名称")]),t._v("    下载安装包,将包放入到node_modules中，如果没有node_modules，会自动创建，把安装包放进去，同时会生成package-lock.json文件，记录所有包的版本号；在pageage.json中会记录安装的这个包的信息。")]),t._v(" "),a("p",[a("strong",[t._v("npm install")]),t._v("       自动去安装package.json和package-lock.json中记录的包,生成node_modules")]),t._v(" "),a("p",[a("strong",[t._v("npx")]),t._v(" /nvm ：切换node的版本")]),t._v(" "),a("p",[t._v("npx -p node@版本号 node -v")]),t._v(" "),a("p",[t._v("npx -p node@版本号 node 文件路径             下载指定版本的node.js，然后运行文件，运行完会将下载的nodejs删除")]),t._v(" "),a("h3",{attrs:{id:"_4-querystring模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-querystring模块"}},[t._v("#")]),t._v(" 4.querystring模块")]),t._v(" "),a("p",[t._v("查询字符串：浏览器向服务器发请求传递数据的一种方式，位于浏览器的地址栏（URL），以问号（？）为分割")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://search.jd.com/Search",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://search.jd.com/Search"),a("OutboundLink")],1),t._v("?"),a("strong",[t._v("keyword=电脑&enc=utf-8")])]),t._v(" "),a("p",[t._v("查询字符串模块用于操作查询字符串的工具模块")]),t._v(" "),a("p",[t._v("浏览器->web服务器->数据库->转递给服务器")]),t._v(" "),a("p",[t._v("parse（）   将查询字符串解析为对象")]),t._v(" "),a("p",[t._v("练习：获取以下查询字符串中传递的数据")]),t._v(" "),a("p",[t._v("‘lid=5&num=1'")]),t._v(" "),a("h3",{attrs:{id:"_5-url模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-url模块"}},[t._v("#")]),t._v(" 5.URL模块")]),t._v(" "),a("p",[t._v("URL：统一资源定位，互联网上的任何资源都有对应的URL")]),t._v(" "),a("p",[t._v("http://"),a("strong",[t._v("www.codeboy.com")]),t._v(":"),a("strong",[t._v("9999")]),t._v("/product_details.html?lid=5")]),t._v(" "),a("p",[t._v("协议        域名/IP地址              端口   文件在服务器的路径   查询字符串")]),t._v(" "),a("p",[t._v("URL模块用于操作URL的工具模块")]),t._v(" "),a("p",[t._v("parse（）  解析一个URL为对象，可以获取URL中的各个部分")]),t._v(" "),a("p",[t._v("练习：获取以下URL中传递的查询字符串数据")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.tmooc.cn:443/web/course.html?cid=2104&cname=nodejs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.tmooc.cn:443/web/course.html?cid=2104&cname=nodejs"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("打印出   班级编号：2104   课程名称：nodejs")]),t._v(" "),a("h3",{attrs:{id:"_6-timer定时器模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-timer定时器模块"}},[t._v("#")]),t._v(" 6.timer定时器模块")]),t._v(" "),a("p",[t._v("定时器模块，提供一组全局函数")]),t._v(" "),a("p",[t._v("（1）一次性定时器")]),t._v(" "),a("p",[t._v("见day01笔记")]),t._v(" "),a("p",[t._v("（2）周期性定时器")]),t._v(" "),a("p",[t._v("开启")]),t._v(" "),a("p",[t._v("let timer = setInterval（回调函数，间隔时间）")]),t._v(" "),a("p",[t._v("每隔一段时间，调用一次回调函数")]),t._v(" "),a("p",[t._v("清除：")]),t._v(" "),a("p",[t._v("cleanInterval（timer）")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 练习：使用周期性定时器每隔两秒钟打印hello，打印3次后结束")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//声明变量用于记录次数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// let count = 0;")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// let timer = setInterval( () =>{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     console.log('hello');")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     //每打印一次，记录一次")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     count++;")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     //判断是否为3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     if(count === 3){")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//         cleanInterval(timer);")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// },2000);")]),t._v("\n")])])]),a("p",[t._v("练习：使用周期性定时器每隔两秒钟打印hello，打印3次后结束")]),t._v(" "),a("p",[t._v("（3）立即执行定时器")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("开启：let timer = setImmediate(回调函数)      清除：cleanImmediate（timer）")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("开启：process.nextTick(回调函数)")])])])]),t._v(" "),a("p",[t._v("setImmediate在事件队列的最前边，process.nextTick在主程序的后边，时间队列的前边")]),t._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210520200054564.png",alt:"image-20210520200054564"}})]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//立即执行定时器")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_7-文件系统模块-fs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-文件系统模块-fs"}},[t._v("#")]),t._v(" 7.文件系统模块（fs）")]),t._v(" "),a("p",[t._v("服务器端的文件包含目录形式和文件形式")]),t._v(" "),a("p",[t._v("fs.statSync(文件路径)  查看文件的状态")]),t._v(" "),a("p",[t._v("​ isDirecotry()是否为文件")]),t._v(" "),a("p",[t._v("fs.mkdirSync(目录的路径)   创建目录")]),t._v(" "),a("p",[t._v("fs.rmdirSync(目录的路径)   删除目录")]),t._v(" "),a("p",[t._v("课后任务")]),t._v(" "),a("p",[t._v("(1)复习今天内容，整理思维导图")]),t._v(" "),a("p",[t._v("(2)练习：开启一次性定时器，3秒以后创建1~10,10个目录；15秒以后再把这10个目录删除。")]),t._v(" "),a("p",[t._v("(3)预习nodejs第3天  同步和异步")]),t._v(" "),a("h2",{attrs:{id:"day12"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#day12"}},[t._v("#")]),t._v(" day12")]),t._v(" "),a("h3",{attrs:{id:"_1-同步和异步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-同步和异步"}},[t._v("#")]),t._v(" 1.同步和异步")]),t._v(" "),a("p",[t._v("同步：在主程序中执行，会阻止后续代码的执行，是通过返回值来获取结果")]),t._v(" "),a("p",[t._v("异步：在一个独立的线程执行，不会阻止后续代码额执行，是通过回调函数来获取结果（大文件或复杂文件）")]),t._v(" "),a("p",[t._v("异步（多线程）")]),t._v(" "),a("p",[t._v("主程序（fs.stat 异步）执行完执行事件队列")]),t._v(" "),a("p",[t._v("线程池：一旦有异步任务，会从线程池中获取一个线程执行任务 ，当执行完把结果以回调函数形式放入到事件队列，把线程归还回去")]),t._v(" "),a("h3",{attrs:{id:"_2-文件系统模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-文件系统模块"}},[t._v("#")]),t._v(" 2.文件系统模块")]),t._v(" "),a("p",[t._v("（1）查看文件状态")]),t._v(" "),a("p",[t._v("fs.stat(文件的路径，回调函数)")]),t._v(" "),a("p",[t._v("​ 回调函数 用来获取结果")]),t._v(" "),a("p",[t._v("​ err   可能产生的错误")]),t._v(" "),a("p",[t._v("​ s       成功的结果")]),t._v(" "),a("p",[t._v("（2）读取目录")]),t._v(" "),a("p",[t._v("readdirSync（目录的路径）/readdir（目录的路径，回调函数）")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//读取目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同步")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdirSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../day11'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//异步")]),t._v("\nfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../day11'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("arr2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("（3）清空写入")]),t._v(" "),a("p",[t._v("writeFileSync（文件的路径，数据）/writeFile（文件的路径，数据，回调函数）")]),t._v(" "),a("p",[t._v("如果文件不存在，先创建文件然后写入数据")]),t._v(" "),a("p",[t._v("如果文件已经存在，先清空文件中的内容，然后写入数据")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("//同步\nfs.writeFileSync('./1.txt','涛哥');\n// 异步\nfs.writeFile('./2.txt','is',(err)=>{\n    if(err){\n        throw err;\n    }\n    console.log('写入成功');\n})\nconsole.log('运行结束');\n")])])]),a("p",[t._v("（4）追加写入")]),t._v(" "),a("p",[t._v("appendFileSync（文件的路径，数据）/appendFile（文件的路径，数据，回调函数）")]),t._v(" "),a("p",[t._v("如果文件不存在，先创建文件然后写入数据")]),t._v(" "),a("p",[t._v("如果文件已经存在，会在文件的末尾追加写入数据")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建数组，包含有多个姓名，遍历数组得到每个姓名，将每个姓名使用异步方式写入到文件stu.txt中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tao'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'liu'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tom'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    异步  顺序随机无法确定")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//arr[i]")]),t._v("\n    fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./stu.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'写入成功'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    同步  顺序不变")]),t._v("\n    fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./stu2.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("（5）读取文件")]),t._v(" "),a("p",[t._v("readFileSync(文件的路径)/readFile（文件的路径，回调函数）读取的数据，格式默认为buffer")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//同步读取")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./1.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//<Buffer e6 b6 9b e5 93 a5>  格式为Buffer")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//把Buffer转为字符串")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//异步读取1.txt")]),t._v("\nfs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./1.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("data1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'运行结束'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("（6）删除文件")]),t._v(" "),a("p",[t._v("unlinkSync（文件的路径）/unlink（文件的路径，回调函数）")]),t._v(" "),a("div",{staticClass:"language-node extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 同步\nfs.unlinkSync('./1.txt');\n//异步\nfs.unlink('./2.txt',(err,data1)=>{\n    if(err)  throw err;\n})\n")])])]),a("p",[t._v("（7）检测文件是否存在")]),t._v(" "),a("p",[t._v("exitsSync（文件的路径）")]),t._v(" "),a("p",[t._v("存在->true    不存在->false")]),t._v(" "),a("p",[t._v("练习：如果文件3.txt存在，同步删除该文件；如果目录mydir不存在，则同步创建该目录。")]),t._v(" "),a("p",[t._v("（8）拷贝文件")]),t._v(" "),a("p",[t._v("copyFileSync（源文件路径，目标文件路径）/copyFile(源文件路径，目标文件路径，回调函数)")]),t._v(" "),a("p",[t._v("（9）流")]),t._v(" "),a("p",[t._v("读取的文件流（源文件）")]),t._v(" "),a("p",[t._v("写入的文件流（目标文件）")]),t._v(" "),a("p",[t._v("流：一段一段")]),t._v(" "),a("p",[t._v("createReadStream()  创建可读取的文件流")]),t._v(" "),a("p",[t._v("createWriteStream()  创建可写入的文件流")]),t._v(" "),a("p",[t._v("pipe（）  管道，可以将读取流通过管道添加到写入流")]),t._v(" "),a("p",[t._v("on（事件名称，回调函数）添加事件，一旦事件触发，会调用回调函数；事件名称是字符串格式")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加事件，监听是否有数据流入内存")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//on(参数1,参数2)  添加事件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//参数1：是一个字符串，表示事件的名称，是固定的")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//data  数据流入")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//参数2：是一个回调函数，一旦触发事件，调用这个函数，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在回调函数中获取流入的数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//统计数量")]),t._v("\nrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    chunk:获取的分段数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     console.log(chunk);")]),t._v("\n    count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//流入一次加1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加事件：读取结束事件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一旦读取结束，调用回调函数")]),t._v("\nrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" rs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createReadStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./node.zip'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建可写入的文件流,创建空文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ws "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./2.zip'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将读取的文件流 通过管道 添加到可写入的文件流")]),t._v("\nrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ws"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-http协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-http协议"}},[t._v("#")]),t._v(" 3.http协议")]),t._v(" "),a("p",[t._v("浏览器和WEB服务器之间的通信协议")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.codeboy.com:9999/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.codeboy.com:9999/index.html"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210521154645814.png",alt:"image-20210521154645814"}})]),t._v(" "),a("h4",{attrs:{id:"_1-通用头信息-general"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-通用头信息-general"}},[t._v("#")]),t._v(" （1）通用头信息（General）")]),t._v(" "),a("p",[a("strong",[t._v("Request URL")]),t._v("：请求的URL，表示要请求的服务器端资源")]),t._v(" "),a("p",[a("strong",[t._v("Request Method")]),t._v("：请求的方式，对资源的操作方式     GET：服务器端获取资源      POST：传递数据给服务器")]),t._v(" "),a("p",[a("strong",[t._v("Status Code")]),t._v("：响应的状态码")]),t._v(" "),a("p",[t._v("1**：服务器端接收到了请求，还没做出响应")]),t._v(" "),a("p",[t._v("2**：成功的响应")]),t._v(" "),a("p",[t._v("3**：响应的重定向，跳转到另一个URL")]),t._v(" "),a("p",[t._v("4**（404）：客户端请求错误")]),t._v(" "),a("p",[t._v("5**：服务器端错误")]),t._v(" "),a("h4",{attrs:{id:"_2-响应头信息-response"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-响应头信息-response"}},[t._v("#")]),t._v(" （2）响应头信息（response）")]),t._v(" "),a("p",[t._v("Content-Type：设置响应的内容类型")]),t._v(" "),a("p",[t._v("解决中文乱码：text/html;charset=utf-8")]),t._v(" "),a("p",[t._v("Location：设置响应的重定向中要跳转的URL（结合3**）")]),t._v(" "),a("h4",{attrs:{id:"_3-请求头信息-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-请求头信息-request"}},[t._v("#")]),t._v(" （3）请求头信息（request）")]),t._v(" "),a("h4",{attrs:{id:"_4-请求主体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-请求主体"}},[t._v("#")]),t._v(" （4）请求主体")]),t._v(" "),a("p",[t._v("可有可无，如果有数据传递才会出现")]),t._v(" "),a("h3",{attrs:{id:"_4-http模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-http模块"}},[t._v("#")]),t._v(" 4.http模块")]),t._v(" "),a("p",[t._v("可以用来创建web服务器，接收请求")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//引入http模块")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建web服务器")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置端口")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过事件来接受请求并作出响应")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    req 请求的对象\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url  获取请求的"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v("，格式为"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/jianbing'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/youtiao'")]),t._v("\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method  获取请求的方法\n    res  响应的对象\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  设置响应的内容\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  设置响应的状态码和头信息\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  结束并发送\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("小图标 favicon.ico")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置响应的状态码和头信息")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeHead")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html;charset=utf-8'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-node extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/设置响应到浏览器的内容\n// res.write('这是你的jianbing');\n// //结束并发送响应\n// res.end();\n// });\n")])])]),a("div",{staticClass:"language-node extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 设置响应的状态码为302，设置跳转的URL\nres.writeHead(302,{\n    Location:'http://www.tmooc.cn/'\n});\n//结束并发送\nres.end();\n")])])]),a("div",{staticClass:"language-node extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("//设置状态码为404\nres.writeHead(404);\n//设置响应的内容\nres.write('Not Found');\n//结束并发送\nres.end();\n});\n")])])]),a("p",[t._v("课后任务\n(1)复习今天内容，整理思维导图\n(2)练习：创建web服务器，设置端口8080，添加事件，根据请求作出响应")]),t._v(" "),a("p",[t._v("if(url==='./')")]),t._v(" "),a("p",[t._v("​    '/list'   响应  '这是商品列表'\n​    '/index'    响应文件'1.html'，先读取文件，然后把读取的内容作为响应的内容\n​    '/study'   跳转到 "),a("a",{attrs:{href:"http://www.tmoo.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.tmoo.cn"),a("OutboundLink")],1),t._v("\n​    其它    响应状态码404    not found\n(3)预习nodejs第4天")]),t._v(" "),a("h2",{attrs:{id:"day13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#day13"}},[t._v("#")]),t._v(" day13")]),t._v(" "),a("h3",{attrs:{id:"_1-框架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-框架"}},[t._v("#")]),t._v(" 1.框架")]),t._v(" "),a("p",[t._v("一整套项目解决方法，简化了已有的功能，添加了之前没有的功能。")]),t._v(" "),a("p",[t._v("1.express框架")]),t._v(" "),a("p",[t._v("基于Node.js平台，快速、开发、极简的web开发框架")]),t._v(" "),a("p",[t._v("网址：www.expressjs.com.cn")]),t._v(" "),a("p",[t._v("属于第三方的模块，需要先去下载安装")]),t._v(" "),a("p",[t._v("npm install "),a("strong",[t._v("express")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("const express = require('express');")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("const app = express();//创建WEB服务器")])]),t._v(" "),a("tr",[a("td",[t._v("app.listen(8080);//设置端口")])])])]),t._v(" "),a("h3",{attrs:{id:"_1-路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-路由"}},[t._v("#")]),t._v(" （1）路由")]),t._v(" "),a("p",[t._v("用来处理不同的请求，根据请求的URL和请求的方法来做出特定的响应。")]),t._v(" "),a("p",[t._v("路由的三要素：请求的URL、请求的方法、回调函数")]),t._v(" "),a("p",[a("em",[a("strong",[t._v("req请求对象")])])]),t._v(" "),a("p",[t._v("req.url                   获取请求的URL")]),t._v(" "),a("p",[t._v("req.method          获取请求的方法")]),t._v(" "),a("p",[a("strong",[t._v("req.query")]),t._v("              获取查询字符串传递的数据")]),t._v(" "),a("p",[a("em",[a("strong",[t._v("res响应对象")])])]),t._v(" "),a("p",[t._v("res.send（）        设置响应的内容并发送")]),t._v(" "),a("p",[t._v("res.redirect（）   设置响应的重定向并且发送")]),t._v(" "),a("p",[t._v("res.sendFile（）   设置响应的文件并发送，文件必须使用绝对路径（__dirname)")]),t._v(" "),a("p",[t._v("./XXXX:相对路径")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/person'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n\x3c!--运用模板字符串--\x3e\n        <h2>这是个人中心</h2>\n        欢迎回来\n")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加路由：跳转")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//get  /study")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//跳转到  tmooc")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/study'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.codeboy.com:9999/index.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加路由（get  /),跳转到 /person")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//同一个服务器下,直接写'/URL'")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/person'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加路由（get/index），响应文件1.html")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/index'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    响应文件,使用绝对路径")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/1.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//路由（post  /  mylogin）")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/mylogin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//url后接收不到")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取post传递的数据，采用流的方式")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//需要使用事件的方式获取")]),t._v("\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//得到的数据是buffer，转字符串后为查询字符串")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//        将查询字符串解析为对象")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" querystring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'登陆成功'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//路由传参")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//路由：查看包的详情")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//get   /package")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/package/:pname'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取路由传参的数据")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'这是包的使用详情'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/shopping/:lid&:count&:uid'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取路由传参的数据")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n    商品的编号：")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lid"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<br>\n    购买的数量：")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("<br>\n    用户的编号：")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uid"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n    ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("以上响应在一个路由中只能调用一次")]),t._v(" "),a("p",[t._v("练习：编写03_express.js,引入express，创建web服务器并设置端口为8080；添加路由（get/search），响应文件search.html")]),t._v(" "),a("p",[a("code",[t._v("<h2>用户搜索</h2>")])]),t._v(" "),a("p",[t._v("练习：根据表单的请求添加路由（get/mysearch),响应’搜索成功‘")]),t._v(" "),a("p",[t._v("练习：添加路由（get /login），响应文件login.html")]),t._v(" "),a("p",[t._v("用户输入用户名和密码，点击提交；添加对应的路由（post  /mylogin),响应’登录成功‘")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("传递方式")]),t._v(" "),a("th",[t._v("格式")]),t._v(" "),a("th",[t._v("路由获取")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("get传递")]),t._v(" "),a("td",[t._v("查询字符串  "),a("a",{attrs:{href:"http://127.0.0.1:8080/mysearch",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/mysearch"),a("OutboundLink")],1),t._v("?"),a("strong",[t._v("kw=笔记本&id=2")])]),t._v(" "),a("td",[t._v("req.query格式为对象")])]),t._v(" "),a("tr",[a("td",[t._v("post传递")]),t._v(" "),a("td",[t._v("采用流的方式传递，不可见")]),t._v(" "),a("td",[t._v("通过事件的方式获取   req.on（’data‘，（chunk）=>{chunk 获取的数据，格式为buffer，转字符串后为查询字符串，需要借助查询字符串模块解析为对象}）")])]),t._v(" "),a("tr",[a("td",[t._v("路由传参")]),t._v(" "),a("td",[a("a",{attrs:{href:"http://127.0.0.xn--18080-oi33a/package/express",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1：8080/package/express"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("app.get('/package/:pname',(req,res)=>{ req.params  获取路由传参的数据，格式为对象})")])])])]),t._v(" "),a("p",[t._v("post传递：  没有大小限制，用于上传附件、视频.....")]),t._v(" "),a("p",[t._v("对比get和post传递数据的区别")]),t._v(" "),a("p",[t._v("​ get传递的数据格式为查询字符串，URL中可见；post传递的方式用流的方式，URL中不可见；post传递更加安全，通常注册、登录会使用；get传递的速度更快，通常搜索的时候使用")]),t._v(" "),a("p",[t._v("​ get传递的数据有大小限制，根据不同的浏览器大小不同，范围2~8k之间，post没有限制")]),t._v(" "),a("p",[t._v("练习：创建添加到购物车的路由（get  / shopping),传递商品的编号lid、购买的数量count、用户的编号uid，最后响应以下内容")]),t._v(" "),a("p",[t._v("商品的编号：XX")]),t._v(" "),a("p",[t._v("购买的数量：XX")]),t._v(" "),a("p",[t._v("用户的编号：XX")]),t._v(" "),a("p",[t._v("/shopping/30&1&5")]),t._v(" "),a("p",[t._v("课后任务")]),t._v(" "),a("p",[t._v("(1)复习今天内容，整理思维导图")]),t._v(" "),a("p",[t._v("(2)练习：创建WEB服务器，设置端口，添加路由(get  /reg)，响应注册的文件reg.html，点击提交向服务器发送请求(post  /myreg)，创建路由接收请求，并获取传递的数据，响应“注册成功”")]),t._v(" "),a("p",[t._v("(3)预习nodeyojs第5天  中间件、正则表达式")]),t._v(" "),a("p",[t._v("![img](file:///C:\\Users\\ASUS\\AppData\\Local\\Temp\\ksohtml7692\\wps1.jpg)")]),t._v(" "),a("h2",{attrs:{id:"day14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#day14"}},[t._v("#")]),t._v(" day14")]),t._v(" "),a("p",[t._v("商品模块 /product")]),t._v(" "),a("p",[t._v("列表、删除、修改")]),t._v(" "),a("p",[t._v("/product/list  /product/delete  /product/update")]),t._v(" "),a("p",[t._v("用户模块 /user")]),t._v(" "),a("p",[t._v("列表、删除、修改")]),t._v(" "),a("p",[t._v("/user/list  /user/delete  /user/update")]),t._v(" "),a("h3",{attrs:{id:"_1-路由器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-路由器"}},[t._v("#")]),t._v(" 1.路由器")]),t._v(" "),a("p",[t._v("用来管理路由，通常将一个模块下的路由放到一个路由器下，例如用户模块下额路由放入的路由放入到用户路由器")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//引入express")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建路由器对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" r "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" express"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加路由(get  /list)响应’用户列表‘")]),t._v("\nr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/list'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户列表'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//导出路由器对象")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在WEB服务器下引入并挂载")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("userRooter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-中间件"}},[t._v("#")]),t._v(" 2.中间件")]),t._v(" "),a("p",[t._v("用于拦截对路由的请求，也可以做出响应，允许往后继续执行（下一个中间件或者路由）；本质上是一个函数，一旦拦截到会自动调用这个函数。")]),t._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210525114205835.png",alt:"image-20210525114205835"}})]),t._v(" "),a("p",[t._v("分为五大类：应用级中间件、路由级中间件、内置中间件、第三方中间件、错误处理中间件")]),t._v(" "),a("h4",{attrs:{id:"_1-应用级中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-应用级中间件"}},[t._v("#")]),t._v(" （1）应用级中间件")]),t._v(" "),a("p",[t._v("也称为自定义中间件")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加中间件，拦截对/list的请求,一旦拦截调用fn")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'拦截了对/list的请求'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    获取get显示传递的数据")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    检测是否为管理员")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    如果用户名不是root，响应请提供管理员账户")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请提供管理员账户'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    否则是管理员root，往后继续执行，可能是下一个中间件或者是路由")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    next是一个函数形式,回调函数")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/list'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("app.use(要拦截的URL，回调函数)")]),t._v(" "),a("p",[t._v("例如：app.use('/list',()=>{})")]),t._v(" "),a("p",[t._v("function fn(req,res,next){")]),t._v(" "),a("p",[t._v("next()//往后继续执行，可能是下一个中间件或者是路由")]),t._v(" "),a("p",[t._v("}")]),t._v(" "),a("p",[t._v("中间件函数可以被复用")]),t._v(" "),a("p",[t._v("练习：创建添加到购物车的路由（get  /shopping),传递商品的价格price，加中间件拦截该路由，对价格大8折，左后在路由中响应")]),t._v(" "),a("p",[t._v("’商品的最终价格：XXX‘")]),t._v(" "),a("p",[t._v("？price = XXX")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加中间件，拦截对/shopping的请求")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     获取请求的数据")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    打折")]),t._v("\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    往后继续执行")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/shopping'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加到购物车路由（get   /shopping)")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/shopping'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取传递的数据")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("商品的最终价格为: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("    ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_2-路由级中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-路由级中间件"}},[t._v("#")]),t._v(" （2）路由级中间件")]),t._v(" "),a("p",[t._v("路由器的使用")]),t._v(" "),a("p",[t._v("app.use(要拦截的URL，路由器)")]),t._v(" "),a("h4",{attrs:{id:"_3-内置中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-内置中间件"}},[t._v("#")]),t._v(" （3）内置中间件")]),t._v(" "),a("p",[t._v("托管静态资源（html，css，js，图像...）")]),t._v(" "),a("p",[t._v("如果浏览器端要请求静态资源，不需要通过路由响应文件，而是自动去寻找文件。")]),t._v(" "),a("p",[t._v("app.use("),a("strong",[t._v("express.static('要托管的目录')")]),t._v(")；")]),t._v(" "),a("p",[t._v("练习：再次托管静态资源到files目录，如果public和files目录出现相同的文件名称，哪一个起作用  ：第一个起作用")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//托管静态资源：如果浏览器端要请求静态资源，自动到public目录寻找")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//内置中间件")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("static")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./public'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ./public:要托管的位置")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n     练习：再次托管静态资源到files目录，\n     如果public和files目录出现相同的文件名称，哪一个起作用\n     */")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("static")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./files'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("练习：编写文件05_three.js,创建web服务器，设置端口8080；托管静态资源到public目录，新建文件login.html，点击提交向服务器发送（post  /login),创建路由，获取传递的数据，响应’登陆成功‘")]),t._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CASUS%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210525170649298.png",alt:"image-20210525170649298"}})]),t._v(" "),a("h4",{attrs:{id:"_4-第三方中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-第三方中间件"}},[t._v("#")]),t._v(" （4）第三方中间件")]),t._v(" "),a("p",[t._v("第三方中间件属于第三方模块，需先去下载安装")]),t._v(" "),a("p",[t._v("npm install body-parser")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.引入body-parser中间件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bodyParser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'body-parser'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//托管静态资源")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("static")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./public'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2.使用body—parser中间件，将post请求的数据解析为对象")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bodyParser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("urlencoded")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    extended"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//是否使用第三方的查询字符串模块qs")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果不使用（false）就会使用核心模块下的querystring")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.在路由中获取post传递的数据   req.body")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   前提使用了中间件")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-mysql模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-mysql模块"}},[t._v("#")]),t._v(" 3.mysql模块")]),t._v(" "),a("p",[t._v("属于第三方模块，Node.js下操作mysql数据库的模块")]),t._v(" "),a("p",[t._v("下载安装")]),t._v(" "),a("p",[t._v("npm install mysql")]),t._v(" "),a("p",[t._v("连接")]),t._v(" "),a("p",[t._v("mysql  -uroot")]),t._v(" "),a("p",[t._v("mysql.exe  -h127.0.0.1  -p3306  -uroot  -p")]),t._v(" "),a("p",[t._v("mysql  -uroot<拖拽脚本     回车")]),t._v(" "),a("p",[t._v("insert  into emp  values（.....）")]),t._v(" "),a("p",[t._v("delete  from  emp  where  eid = 1；")]),t._v(" "),a("p",[t._v("update  emp  set  sex = 1，...  where  eid = 2；")]),t._v(" "),a("p",[t._v("select  *  from  emp  where...")]),t._v(" "),a("h2",{attrs:{id:"day15"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#day15"}},[t._v("#")]),t._v(" day15")]),t._v(" "),a("h3",{attrs:{id:"_1-mysql模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysql模块"}},[t._v("#")]),t._v(" 1.mysql模块")]),t._v(" "),a("p",[t._v("（1）创建普通连接")]),t._v(" "),a("p",[t._v("createConnection（）")]),t._v(" "),a("p",[t._v("（2）执行SQL命令")]),t._v(" "),a("p",[t._v("query（SQL命令，回调函数）")]),t._v(" "),a("p",[t._v("属于异步操作，通过回调函数获取结果")]),t._v(" "),a("p",[t._v("err      可能产生的错误结果")]),t._v(" "),a("p",[t._v("result  成功的结果")]),t._v(" "),a("p",[t._v("（3）创建连接池")]),t._v(" "),a("p",[t._v("createPool（）")]),t._v(" "),a("p",[t._v("连接池")]),t._v(" "),a("p",[t._v("取一个连接去连接，连接后归还")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//引入连接池对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pool "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../pool.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建连接池对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pool "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'127.0.0.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3306'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    database"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tedu'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    connectionLimit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//导出连接池对象")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取员工资源的接口")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过路由来完成的接口 （get  /v1/emps）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://127.0.0.1:8080/v1/emps/1")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/v1/emps/:eid'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取路由传参的数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//执行SQL命令，查询编号对应的员工")]),t._v("\npool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'select * from emp where eid = ?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'获取成功'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("result\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("（4）占位符（？）")]),t._v(" "),a("p",[t._v("SQL注入：在让用户提供的值中出现了对数据库有攻击的命令")]),t._v(" "),a("p",[t._v("解决方法：对所有用户提供的值进行过滤")]),t._v(" "),a("p",[t._v("所有SQL命令中需要拼接的用户的值，先进行过滤，然后再去替换占位符")]),t._v(" "),a("p",[t._v("query('delete from emp where eid = ?',[18],(err,result)=>{   })")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'小离 \" or \" 1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//'select * from emp where ename =\"' + '小离 \" or \" 1' + '\"'  //所有数据都暴露出来")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//方法一：let str = '小离 \\' or \\' 1';")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//方法二：占位符（？），mysql模块提供的，用于过滤用户提供的数据")]),t._v("\npool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'select * from emp where ename=?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("下载软件：apipost  用于接口测试")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.apipost.cn/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.apipost.cn/download.html"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_2-正则表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-正则表达式"}},[t._v("#")]),t._v(" 2.正则表达式")]),t._v(" "),a("h4",{attrs:{id:"_1-最简单规则就是要找到的关键词正文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-最简单规则就是要找到的关键词正文"}},[t._v("#")]),t._v(" （1）最简单规则就是要找到的关键词正文")]),t._v(" "),a("h4",{attrs:{id:"_2-字符集-规定一位字符上多种备选字的列表-当某一位字符上有多种备选字时-用字符集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-字符集-规定一位字符上多种备选字的列表-当某一位字符上有多种备选字时-用字符集"}},[t._v("#")]),t._v(" （2）字符集：规定一位字符上多种备选字的列表，当某一位字符上有多种备选字时，用字符集  []")]),t._v(" "),a("h4",{attrs:{id:"_3-中部分备选字时连续的-x-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-中部分备选字时连续的-x-x"}},[t._v("#")]),t._v(" （3）[]中部分备选字时连续的：[x-x]")]),t._v(" "),a("p",[t._v("要匹配一位汉字：[\\u4e00-\\u9fa5]      //包含所有汉字")]),t._v(" "),a("h4",{attrs:{id:"_4-预定义字符集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-预定义字符集"}},[t._v("#")]),t._v(" (4)预定义字符集")]),t._v(" "),a("p",[t._v("\\d :[0-9]")]),t._v(" "),a("p",[t._v("\\w:[0-9A-Za-z]")]),t._v(" "),a("p",[t._v("\\s:空格、制表符tab等空白")]),t._v(" "),a("p",[t._v(".  ：任意字符")]),t._v(" "),a("h4",{attrs:{id:"_5-数量词"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-数量词"}},[t._v("#")]),t._v(" （5）数量词")]),t._v(" "),a("p",[t._v("1.有明确数量边界的数量词\n字符集{n}    表示字符集必须重复n次，不能多也不能少\n字符集{n,m}  表示字符集至少重复n次，最多重复m次，\n比如: \\d{4,6} 表示4到6位数字\n字符集{n,}  表示字符集匹配的内容至少重复n次，多了不限，比如：\\d{6,} 表示6位以上数字")]),t._v(" "),a("p",[t._v("2.没有明确数量边界的数量词")]),t._v(" "),a("p",[t._v("*可有可无，多了不限\n?  可有可无，最多一次")]),t._v(" "),a("p",[t._v("+至少一次，多了不限")]),t._v(" "),a("p",[t._v("eg：([我卧]|wo)\\s*([草艹槽]|cao)")]),t._v(" "),a("p",[t._v("( \\ +86|0086) ——+是正则有功能的特殊符号，可是这里不希望+当做特殊功能使用，只当做普通字符匹配，所以用+阻止正则解析+为数量词。")]),t._v(" "),a("p",[t._v("至少一个空字符 : \\s+\n之前所有，整体可有可无，最多一次： ()?")]),t._v(" "),a("p",[t._v("eg：定义完整手机号规则")]),t._v(" "),a("p",[t._v("( \\ +86|0086)\\s+)?1[3-9]\\d{9}")]),t._v(" "),a("h4",{attrs:{id:"_6-选择和分组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-选择和分组"}},[t._v("#")]),t._v(" （6）选择和分组")]),t._v(" "),a("p",[a("strong",[t._v("选择")]),t._v("，是指在多个子规则中选其一匹配")]),t._v(" "),a("p",[t._v("今后，只要在多个子规则中选其一匹配时，就用选择\n如何:     子规则1   |   子规则2"),a("br"),t._v("\n读作:  满足规则1 或  满足规则2\n“|”选择符只分左右，不考虑单个字符")]),t._v(" "),a("p",[t._v("eg：草|cao")]),t._v(" "),a("p",[a("strong",[t._v("分组")]),t._v("，将多个子规则视为一组，再和分组外的规则匹配\n只要希望将多个子规则视为一个整体，再和其它规则匹配时，就用分组\n如何： 其它规则 (多个子规则)")]),t._v(" "),a("p",[t._v("eg：我（草|cao）")]),t._v(" "),a("h4",{attrs:{id:"_7-指定匹配位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-指定匹配位置"}},[t._v("#")]),t._v(" （7）指定匹配位置")]),t._v(" "),a("p",[t._v("^字符串的开头位置")]),t._v(" "),a("p",[t._v("$字符串的结尾位置")]),t._v(" "),a("p",[t._v("\\b 表示单词边界，可匹配：空格，标点符号，字符串开头和结尾等可将一个单词与其它单词分割开的符号。")]),t._v(" "),a("p",[t._v("问题: 只写\\b什么也匹配不到\n原因: 其实\\b是”零宽”，只匹配位置，不匹配字符\n所以: 下边这句话其实有8个单词边界")]),t._v(" "),a("p",[t._v("you can you up")]),t._v(" "),a("h4",{attrs:{id:"_8-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-api"}},[t._v("#")]),t._v(" (8)API")]),t._v(" "),a("h5",{attrs:{id:"_1-查找一个固定不变的敏感词在字符串中出现的位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-查找一个固定不变的敏感词在字符串中出现的位置"}},[t._v("#")]),t._v(" 1.查找一个固定不变的敏感词在字符串中出现的位置")]),t._v(" "),a("p",[t._v("a.回顾：var i = str.indexOf（\"敏感词\"，fromi）\n位置<-的<-'敏感词'")]),t._v(" "),a("p",[t._v("b.在字符串str中，从fromi位置开始，查找下一个’敏感词‘出现的位置。")]),t._v(" "),a("p",[t._v("c.简写：第二个参数fromi可省略，如果省略fromi，则默认从0位置（开头）查找第一个’敏感词‘出现的位置")]),t._v(" "),a("p",[t._v("d.返回值：如果找到敏感词，这返回敏感词第一个字的下标位置i。如果没找到敏感词，则返回-1.")]),t._v(" "),a("p",[t._v("eg：检查是否包含敏感词”我草“")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("var i = str.indexOf('我草');\nif(i != -1){\ndocument.write(`<h1 style='color:red')管理员：发现敏感词"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("`}else{\ndocument.write(`"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token special-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),a("span",{pre:!0,attrs:{class:"token value css language-css"}},[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("green")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    然哥:${msg}"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--显示“然哥说：XXXX”--\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("`)\n}\n")])])]),a("h5",{attrs:{id:"_2-用正则表达式模糊查找多种正则表达式的位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-用正则表达式模糊查找多种正则表达式的位置"}},[t._v("#")]),t._v(" 2.用正则表达式模糊查找多种正则表达式的位置")]),t._v(" "),a("p",[t._v("a.var i = str.search（/正则/);")]),t._v(" "),a("p",[t._v("b.在字符串str中，从fromi位置开始，查找下一个’敏感词‘出现的位置。")]),t._v(" "),a("p",[t._v("c.简写：第二个参数fromi可省略，如果省略fromi，则默认从0位置（开头）查找第一个’敏感词‘出现的位置")]),t._v(" "),a("p",[t._v("d.返回值：如果找到敏感词，这返回敏感词第一个字的下标位置i。如果没找到敏感词，则返回-1.")]),t._v(" "),a("p",[t._v("问题：只能返回敏感词的位置，不能返回敏感词的内容")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("var i = str.search(/([我卧]|wo)\\s*([草艹槽]|cao)/);\nif(i != -1){\ndocument.write(`<h1 style='color:red')管理员：发现敏感词"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("`}else{\ndocument.write(`"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token special-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),a("span",{pre:!0,attrs:{class:"token value css language-css"}},[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("green")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    然哥:${msg}"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--显示“然哥说：XXXX”--\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("`)\n}\n")])])]),a("h5",{attrs:{id:"_3-获取敏感词的内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-获取敏感词的内容"}},[t._v("#")]),t._v(" 3.获取敏感词的内容")]),t._v(" "),a("p",[t._v("a.var arr = str.match(/正则/i)")]),t._v(" "),a("p",[t._v("​       匹配")]),t._v(" "),a("p",[t._v("b.用正则去匹配str中第一个符合要求的敏感词")]),t._v(" "),a("p",[t._v("c.返回值：")]),t._v(" "),a("p",[t._v("​ 1）如果找敏感词，就同时返回一个数组！")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("数组中包括：这个敏感词的内容和敏感词第一个字的位置")])]),t._v(" "),a("li",[a("p",[t._v("数组结构：（2个房间（元素））")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("p",[t._v("​ '0':'敏感词的内容，")]),t._v(" "),a("p",[t._v("​ ’index‘：敏感词第一个字的位置")]),t._v(" "),a("p",[t._v("]")]),t._v(" "),a("p",[t._v("js中有两种数组：索引数组和关联数组")]),t._v(" "),a("p",[t._v("索引数组：所有元素的下标都是数字的数组  var arr=[10,20,30,40]")]),t._v(" "),a("p",[t._v("关联数组：所有元素的下标都是自定义的字符串名称的数组")]),t._v(" "),a("p",[t._v("var ym=[]")]),t._v(" "),a("p",[t._v('ym["math"]=98')]),t._v(" "),a("p",[t._v('ym["eng"]=91')]),t._v(" "),a("p",[t._v("结果：[")]),t._v(" "),a("p",[t._v('"math":98,')]),t._v(" "),a("p",[t._v('"eng":91]')])]),t._v(" "),a("li",[a("p",[t._v("这个敏感词的内容和敏感词第一个字的位置，如果找不到敏感词，返回null")]),t._v(" "),a("p",[t._v("d.解决match默认只能查找第一个敏感词，无法查找字符串中所有敏感词：在match中正则第二个/后面加**/g** ，意味global全部，但是只能返回敏感词的内容，无法返回位置")]),t._v(" "),a("p",[t._v("var arr = str.match(/正则/"),a("strong",[t._v("g")]),t._v(")")]),t._v(" "),a("p",[t._v("总结：1.想获取第一个敏感词的内容和位置：就用match不加g")]),t._v(" "),a("p",[t._v("2.获取所有敏感词的内容，不关心位置，就用match加g")])])]),t._v(" "),a("p",[t._v("​ 2）")]),t._v(" "),a("p",[t._v("正则表达式完整视频\n"),a("a",{attrs:{href:"https://pan.baidu.com/s/1IgYS8oGBrRgZQropPUTnoA",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pan.baidu.com/s/1IgYS8oGBrRgZQropPUTnoA"),a("OutboundLink")],1),t._v(" 提取码：nbx3\n正则相关函数的用法总结\n"),a("a",{attrs:{href:"https://pan.baidu.com/s/1Rvqr-5UI7NxoxArdgxyRhg",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pan.baidu.com/s/1Rvqr-5UI7NxoxArdgxyRhg"),a("OutboundLink")],1),t._v(" 提取码：08yj")]),t._v(" "),a("h3",{attrs:{id:"_3-restful接口-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-restful接口-api"}},[t._v("#")]),t._v(" 3.RESTful接口（API）")]),t._v(" "),a("p",[t._v("接口：后端为前端提供的动态资源（数据、后端验证....）属于后端软件")]),t._v(" "),a("p",[t._v("RESTful是一种接口设计风格（规范）")]),t._v(" "),a("p",[t._v("动态资源就是一个URL形式")]),t._v(" "),a("h4",{attrs:{id:"_1-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-url"}},[t._v("#")]),t._v(" （1）URL")]),t._v(" "),a("p",[t._v("所有的资源都需要版本号，复数形式")]),t._v(" "),a("p",[t._v("例如：请求员工资源")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://127.0.0.1:8080/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/"),a("OutboundLink")],1),a("strong",[t._v("v1")]),t._v("/emp"),a("strong",[t._v("s")]),t._v("               多个资源")]),t._v(" "),a("p",[t._v("​                                  版本号/资源名称")]),t._v(" "),a("p",[t._v("版本2的用户资源：")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://127.0.0.1:8080/v2/user",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/v2/user"),a("OutboundLink")],1),a("strong",[t._v("s")]),t._v("                多个资源")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://127.0.0.1:8080/v2/users/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/v2/users/"),a("OutboundLink")],1),a("code",[t._v("<u>")]),t._v("3"),t._v("             单个资源")]),t._v(" "),a("p",[t._v("​                                                      编号")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://127.0.0.1:8080/v2/users/checkuname",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/v2/users/checkuname"),a("OutboundLink")],1),t._v("   检测用户名")]),t._v(" "),a("p",[t._v("​                                                     对资源的特殊操作")]),t._v(" "),a("p",[t._v("app.get('/v2/users',()=>{})    //在路由中用到")]),t._v(" "),a("h4",{attrs:{id:"_2-请求方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-请求方法"}},[t._v("#")]),t._v(" （2）请求方法")]),t._v(" "),a("p",[t._v("对资源的操作方式：增删改查      浏览器只能发送get和post")]),t._v(" "),a("p",[t._v("get          获取资源")]),t._v(" "),a("p",[t._v("delete    删除资源")]),t._v(" "),a("p",[t._v("post       新建资源")]),t._v(" "),a("p",[t._v("put         修改资源")]),t._v(" "),a("p",[t._v("练习：添加路由，删除某一个用户用户资源")]),t._v(" "),a("p",[t._v("app.delete('/v2/users/:uid',(req,res)=>{    })")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/v1/emps/:eid'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    获取路由传参的数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    执行SQL命令")]),t._v("\n    pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'delete from emp where eid = ?'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    返回的结果是对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果对象下的affectRows属性值为0说明删除失败，否则删除成功")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("affectedRows "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("201")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'删除失败'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'删除成功'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3-过滤数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-过滤数据"}},[t._v("#")]),t._v(" （3）过滤数据")]),t._v(" "),a("p",[t._v("查询的结果有太多的记录，需要过滤想要的数据")]),t._v(" "),a("p",[t._v("eg：分页")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://127.0.0.1:8080/v2/users",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/v2/users"),a("OutboundLink")],1),t._v("?"),a("strong",[t._v("pno=1&count=10")])]),t._v(" "),a("p",[t._v("​                                                         页码     每页数据量")]),t._v(" "),a("p",[t._v("eg：获取商品的价格区间")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://127.0.0.1:8080/v2/products",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://127.0.0.1:8080/v2/products"),a("OutboundLink")],1),t._v("?"),a("strong",[t._v("price1=10000&price2=20000")])]),t._v(" "),a("h4",{attrs:{id:"_4-返回结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-返回结果"}},[t._v("#")]),t._v(" （4）返回结果")]),t._v(" "),a("p",[t._v("包含状态码、消息、数据（不一定都有）")]),t._v(" "),a("p",[t._v("登陆的接口")]),t._v(" "),a("p",[t._v("{   //json对象")]),t._v(" "),a("p",[t._v('​ "code"：200，')]),t._v(" "),a("p",[t._v('​ "msg"："登录成功"')]),t._v(" "),a("p",[t._v("}")]),t._v(" "),a("p",[t._v("获取员工数据")]),t._v(" "),a("p",[t._v("{")]),t._v(" "),a("p",[t._v("​ “code”：200，")]),t._v(" "),a("p",[t._v("​ “msg”：“获取成功”，")]),t._v(" "),a("p",[t._v("​ “data”：[......]  //获取的员工数据")]),t._v(" "),a("p",[t._v("}")]),t._v(" "),a("p",[t._v("课后任务")]),t._v(" "),a("p",[t._v("完成删除员工的接口")]),t._v(" "),a("p",[t._v("​ 请求方法 delete    /v1/emps/编号")]),t._v(" "),a("p",[t._v("​ 响应结果 {code：200，msg：’删除成功‘}")]),t._v(" "),a("h2",{attrs:{id:"day16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#day16"}},[t._v("#")]),t._v(" day16")]),t._v(" "),a("p",[t._v("练习：在app.js下创建服务器并设置端口")]),t._v(" "),a("p",[t._v("练习：创建路由器目录router，目录下包含由用户路由器user.js，创建路由器对象，添加用户注册的路由")]),t._v(" "),a("p",[t._v("（post  /reg）,响应{code:200,msg:'注册成功'}")]),t._v(" "),a("p",[t._v("练习：在web服务器app.js中引入用户路由器(./router/user.js)，并挂载，添加前缀/v1/users")]),t._v(" "),a("p",[t._v("/reg")]),t._v(" "),a("p",[t._v("/v1/users/reg")]),t._v(" "),a("p",[t._v("header:get  传递的数据")]),t._v(" "),a("p",[t._v("​   body ：")]),t._v(" "),a("p",[t._v("练习:在user.js中编写用户登录的路由(post   /login),获取post请求的数据,验证各项是否为空,执行SQL命令,如果查询到了用户名和密码同时匹配的数据就是登陆成功,否则登陆失败")]),t._v(" "),a("p",[t._v("练习:编写按照编号查找员工(get  /编号),获取传递的编号,执行SQL命令,查询编号对应的用户,如果每页查询到{code:201,msg:\"该用户不存在\"},否则查询到{code:200,msg:'查询成功',data:[..]}")]),t._v(" "),a("p",[t._v("练习:编写按照编号删除员工(delete  /编号),获取传递的编号,执行SQL命令,删除编号对应的用户,如果删除失败{code:201,msg:'删除失败'},否则删除成功{code:200,msg:'删除成功'}")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("eid\n")])])]),a("div",{staticClass:"language-test extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("![image-20210527173657131](C:\\Users\\ASUS\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210527173657131.png)\n\nhttp://127.0.0.1:8080/v1/users/3\n\n\ngit下载地址\n\nhttps://pc.qq.com/detail/13/detail_22693.html\n\n \n\n码云注册账号\n\nhttps://gitee.com/\n\nGitHub注册账号\n\nhttps://github.com\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);